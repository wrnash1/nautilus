# Apache Configuration for Nautilus Dive Shop Management System
# Copy this file to /etc/httpd/conf.d/nautilus.conf

<VirtualHost *:80>
    ServerName localhost
    ServerAlias nautilus.local

    # Document root should point to the public directory
    DocumentRoot /var/www/html/nautilus/public

    <Directory /var/www/html/nautilus/public>
        Options -Indexes +FollowSymLinks
        AllowOverride All
        Require all granted

        # Enable mod_rewrite
        <IfModule mod_rewrite.c>
            RewriteEngine On
        </IfModule>
    </Directory>

    # Deny access to parent directory
    <Directory /var/www/html/nautilus>
        Options -Indexes
        Require all denied
    </Directory>

    # Allow access only to public directory
    <Directory /var/www/html/nautilus/public>
        Require all granted
    </Directory>

    # Logging
    ErrorLog /var/log/httpd/nautilus-error.log
    CustomLog /var/log/httpd/nautilus-access.log combined

    # PHP settings
    <IfModule mod_php.c>
        php_value upload_max_filesize 10M
        php_value post_max_size 10M
        php_value memory_limit 256M
        php_value max_execution_time 300
    </IfModule>
</VirtualHost>

# For production with SSL (port 443), add:
# <VirtualHost *:443>
#     ServerName yourdomain.com
#     DocumentRoot /var/www/html/nautilus/public
#
#     SSLEngine on
#     SSLCertificateFile /path/to/cert.pem
#     SSLCertificateKeyFile /path/to/key.pem
#
#     # Same Directory settings as above
# </VirtualHost>
